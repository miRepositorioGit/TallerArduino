<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html class="js js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" style="" lang="en-US"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="profile" href="https://gmpg.org/xfn/11">
  <link rel="pingback" href="https://idyl.io/xmlrpc.php">
  <!-- scripts for IE8 and less  -->
  <!--[if lt IE 9]>
    <script src="https://idyl.io/wp-content/themes/customizr/assets/front/js/libs/html5.js"></script>
  <![endif]-->
<div class="fit-vids-style" id="fit-vids-style" style="display: none;">­<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style></div><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/reactive_library.js"></script><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/rum.js"></script><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/osd.js"></script><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/ca-pub-8282748246084126.js"></script><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/show_ads_impl.js" id="google_shimpl"></script><script type="text/javascript" async="" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/ga.js"></script><script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script>
<title>Sine Pulse LED PWM trick: the 8 bit way – idyl.io</title>
<link rel="dns-prefetch" href="https://fonts.googleapis.com/">
<link rel="dns-prefetch" href="https://s.w.org/">
<link rel="alternate" type="application/rss+xml" title="idyl.io » Feed" href="https://idyl.io/feed/">
<link rel="alternate" type="application/rss+xml" title="idyl.io » Comments Feed" href="https://idyl.io/comments/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/12.0.0-1\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/idyl.io\/wp-includes\/js\/wp-emoji-release.min.js?ver=5.2.2"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55357,56424,55356,57342,8205,55358,56605,8205,55357,56424,55356,57340],[55357,56424,55356,57342,8203,55358,56605,8203,55357,56424,55356,57340]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/wp-emoji-release.js" type="text/javascript" defer="defer"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
	<link rel="stylesheet" id="crayon-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/crayon.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-theme-classic-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/classic.css" type="text/css" media="all">
<link rel="stylesheet" id="crayon-font-monaco-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/monaco.css" type="text/css" media="all">
<link crossorigin="anonymous" rel="stylesheet" id="czr-gfonts-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/css.css" type="text/css" media="all">
<link rel="stylesheet" id="customizr-fa-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/fontawesome-all.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/style.css" type="text/css" media="all">
<link rel="stylesheet" id="sek-base-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/sek-base.css" type="text/css" media="all">
<link rel="stylesheet" id="cookie-consent-style-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/style_002.css" type="text/css" media="all">
<link rel="stylesheet" id="customizr-main-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/style_003.css" type="text/css" media="all">
<style id="customizr-main-inline-css" type="text/css">
.navbar-brand,.header-tagline,h1,h2,h3,.tc-dropcap { font-family : 'Fjalla One';font-weight : 400; }
body { font-family : 'Cantarell';font-weight : 400; }

.tc-header.border-top { border-top-width: 5px; border-top-style: solid }
#czr-push-footer { display: none; visibility: hidden; }
        .czr-sticky-footer #czr-push-footer.sticky-footer-enabled { display: block; }
        
</style>
<link rel="stylesheet" id="__EPYT__style-css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/ytprefs.css" type="text/css" media="all">
<style id="__EPYT__style-inline-css" type="text/css">

                .epyt-gallery-thumb {
                        width: 33.333%;
                }
                
</style>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/jquery.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/jquery-migrate.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/idyl.io\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/crayon.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/modernizr.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var CZRParams = {"assetsPath":"https:\/\/idyl.io\/wp-content\/themes\/customizr\/assets\/front\/","_disabled":[],"centerSliderImg":"1","isLightBoxEnabled":"1","SmoothScroll":{"Enabled":true,"Options":{"touchpadSupport":false}},"isAnchorScrollEnabled":"","anchorSmoothScrollExclude":{"simple":["[class*=edd]",".carousel-control","[data-toggle=\"modal\"]","[data-toggle=\"dropdown\"]","[data-toggle=\"czr-dropdown\"]","[data-toggle=\"tooltip\"]","[data-toggle=\"popover\"]","[data-toggle=\"collapse\"]","[data-toggle=\"czr-collapse\"]","[data-toggle=\"tab\"]","[data-toggle=\"pill\"]","[data-toggle=\"czr-pill\"]","[class*=upme]","[class*=um-]"],"deep":{"classes":[],"ids":[]}},"timerOnScrollAllBrowsers":"1","centerAllImg":"1","HasComments":"","LoadModernizr":"1","stickyHeader":"","extLinksStyle":"1","extLinksTargetExt":"1","extLinksSkipSelectors":{"classes":["btn","button"],"ids":[]},"dropcapEnabled":"","dropcapWhere":{"post":"","page":""},"dropcapMinWords":"","dropcapSkipSelectors":{"tags":["IMG","IFRAME","H1","H2","H3","H4","H5","H6","BLOCKQUOTE","UL","OL"],"classes":["btn"],"id":[]},"imgSmartLoadEnabled":"","imgSmartLoadOpts":{"parentSelectors":["[class*=grid-container], .article-container",".__before_main_wrapper",".widget-front",".post-related-articles",".tc-singular-thumbnail-wrapper"],"opts":{"excludeImg":[".tc-holder-img"]}},"imgSmartLoadsForSliders":"","pluginCompats":[],"isWPMobile":"","menuStickyUserSettings":{"desktop":"no_stick","mobile":"no_stick"},"adminAjaxUrl":"https:\/\/idyl.io\/wp-admin\/admin-ajax.php","ajaxUrl":"https:\/\/idyl.io\/?czrajax=1","frontNonce":{"id":"CZRFrontNonce","handle":"49ba8e840f"},"isDevMode":"","isModernStyle":"1","i18n":{"Permanently dismiss":"Permanently dismiss"},"frontNotifications":{"welcome":{"enabled":false,"content":"","dismissAction":"dismiss_welcome_note_front"}}};
/* ]]> */
</script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/tc-scripts.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var _EPYT_ = {"ajaxurl":"https:\/\/idyl.io\/wp-admin\/admin-ajax.php","security":"743b77f9f5","gallery_scrolloffset":"20","eppathtoscripts":"https:\/\/idyl.io\/wp-content\/plugins\/youtube-embed-plus\/scripts\/","eppath":"https:\/\/idyl.io\/wp-content\/plugins\/youtube-embed-plus\/","epresponsiveselector":"[\"iframe.__youtube_prefs_widget__\"]","epdovol":"1","version":"13.1","evselector":"iframe.__youtube_prefs__[src], iframe[src*=\"youtube.com\/embed\/\"], iframe[src*=\"youtube-nocookie.com\/embed\/\"]","ajax_compat":"","ytapi_load":"light","stopMobileBuffer":"1","vi_active":"","vi_js_posttypes":[]};
/* ]]> */
</script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/ytprefs.js"></script>
<link rel="https://api.w.org/" href="https://idyl.io/wp-json/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://idyl.io/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://idyl.io/wp-includes/wlwmanifest.xml"> 
<meta name="generator" content="WordPress 5.2.2">
<link rel="canonical" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/a_003.htm">
<link rel="shortlink" href="https://idyl.io/?p=234">
<link rel="alternate" type="application/json+oembed" href="https://idyl.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fidyl.io%2Farduino%2Fquadratic-wave-led%2F">
<link rel="alternate" type="text/xml+oembed" href="https://idyl.io/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fidyl.io%2Farduino%2Fquadratic-wave-led%2F&amp;format=xml">
   <script type="text/javascript">
   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-89519721-1']);
   _gaq.push(['_trackPageview']);
   (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();
   </script>
<script async="" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8282748246084126",
    enable_page_level_ads: true
  });
</script><style id="ctcc-css" type="text/css" media="screen">
				#catapult-cookie-bar {
					box-sizing: border-box;
					max-height: 0;
					opacity: 0;
					z-index: 99999;
					overflow: hidden;
					color: #ddd;
					position: fixed;
					left: 0;
					top: 0;
					width: 100%;
					background-color: #464646;
				}
				#catapult-cookie-bar a {
					color: #fff;
				}
				#catapult-cookie-bar .x_close span {
					background-color: ;
				}
				button#catapultCookie {
					background:;
					color: ;
					border: 0; padding: 6px 9px; border-radius: 3px;
				}
				#catapult-cookie-bar h3 {
					color: #ddd;
				}
				.has-cookie-bar #catapult-cookie-bar {
					opacity: 1;
					max-height: 999px;
					min-height: 30px;
				}</style>		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		<link rel="amphtml" href="https://idyl.io/arduino/quadratic-wave-led/?amp"><link rel="icon" href="https://idyl.io/wp-content/uploads/2016/12/Integrated-Circuit-100.png" sizes="32x32">
<link rel="icon" href="https://idyl.io/wp-content/uploads/2016/12/Integrated-Circuit-100.png" sizes="192x192">
<link rel="apple-touch-icon-precomposed" href="https://idyl.io/wp-content/uploads/2016/12/Integrated-Circuit-100.png">
<meta name="msapplication-TileImage" content="https://idyl.io/wp-content/uploads/2016/12/Integrated-Circuit-100.png">
<style type="text/css" id="nimble-global-breakpoint-options"></style><link rel="stylesheet" id="czr-magnific-popup" type="text/css" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/magnific-popup.css"><style>input[type=file]:focus,input[type=radio]:focus,input[type=checkbox]:focus,select:focus,span:focus,a:focus,button{outline:none!important;-webkit-box-shadow:none!important;box-shadow:none!important;}input[type=file]::-moz-focus-inner,input[type=radio]::-moz-focus-inner,input[type=checkbox]::-moz-focus-inner,select::-moz-focus-inner,a::-moz-focus-inner{border:0;}</style><link rel="preload" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/integrator.js" as="script"><script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/integrator.js"></script><link rel="preload" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/integrator_002.js" as="script"><script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/integrator_002.js"></script><link rel="preload" href="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/show_ads_impl.js" as="script"></head>

  <body class="page-template-default page page-id-234 page-child parent-pageid-195 wp-embed-responsive sek-hide-rc-badge ctcc-exclude-AF ctcc-exclude-AN ctcc-exclude-AS ctcc-exclude-NA ctcc-exclude-OC ctcc-exclude-SA czr-link-hover-underline header-skin-light footer-skin-dark czr-no-sidebar tc-center-images czr-full-layout czr-sticky-footer mozilla tc-smoothscroll allow-pointer-events-on-scroll">
        
    
    <div id="tc-page-wrap" class="">

      <header class="tpnav-header__header tc-header sl-logo_right sticky-brand-shrink-on sticky-transparent border-top czr-submenu-fade czr-submenu-move" role="banner">
                    <div class="primary-navbar__wrapper d-none d-lg-block has-horizontal-menu">
  <div class="container-fluid">
    <div class="row align-items-center flex-row primary-navbar__row">
      <div class="branding__container col col-auto">
  <div class="branding align-items-center flex-column ">
    <div class="branding-row d-flex align-self-start flex-row align-items-center">
      <div class="navbar-brand col-auto ">
  <a class="navbar-brand-sitelogo" href="https://idyl.io/" aria-label="idyl.io | Electrical engineering &amp; Arduino resources for makers">
    <img src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/newlogo25032b.png" alt="Back Home" class="" style="max-width:250px;max-height:100px" data-no-retina="" width="250" height="100">  </a>
</div>
      </div>
    <span class="header-tagline ">
  Electrical engineering &amp; Arduino resources for makers</span>

  </div>
</div>
      <div class="primary-nav__container justify-content-lg-around col col-lg-auto flex-lg-column">
  <div class="primary-nav__wrapper flex-lg-row align-items-center justify-content-end">
              <nav class="primary-nav__nav col" id="primary-nav">
          <div class="nav__menu-wrapper primary-nav__menu-wrapper justify-content-start czr-open-on-hover">
<ul id="main-menu" class="primary-nav__menu regular-nav nav__menu nav"><li id="menu-item-332" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-332"><a href="https://idyl.io/" class="nav__link"><span class="nav__title">Home</span></a></li>
<li id="menu-item-333" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-333"><a href="https://idyl.io/category/review/" class="nav__link"><span class="nav__title">Reviews</span></a></li>
<li id="menu-item-1135" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children czr-dropdown menu-item-1135"><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" href="https://idyl.io/electronics/" class="nav__link"><span class="nav__title">Electronics</span><span class="caret__dropdown-toggler"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu">
	<li id="menu-item-1136" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1136"><a href="https://idyl.io/electronics/basics/voltage-current-resistance/" class="nav__link"><span class="nav__title">Voltage, current &amp; resistance</span></a></li>
	<li id="menu-item-1412" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-1412"><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" href="#" class="nav__link"><span class="nav__title">Power</span><span class="caret__dropdown-toggler"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu">
		<li id="menu-item-1246" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1246"><a href="https://idyl.io/electronics/power/voltage-regulation/" class="nav__link"><span class="nav__title">Introduction to Voltage Regulation</span></a></li>
		<li id="menu-item-1413" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1413"><a href="https://idyl.io/electronics/power/linear-regulator/" class="nav__link"><span class="nav__title">The Linear Regulator</span></a></li>
</ul>
</li>
</ul>
</li>
<li id="menu-item-334" class="menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children czr-dropdown current-active menu-item-334 show" style=""><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="true" href="#" class="nav__link"><span class="nav__title">Arduino</span><span class="caret__dropdown-toggler"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu open-right" style="">
	<li id="menu-item-411" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-411" style=""><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" href="#" class="nav__link"><span class="nav__title">How To</span><span class="caret__dropdown-toggler open-right"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu open-right" style="">
		<li id="menu-item-455" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-455"><a href="https://idyl.io/arduino/how-to/control-a-nixie-tube-with-arduino/" class="nav__link"><span class="nav__title">How to control a Nixie Tube with Arduino</span></a></li>
		<li id="menu-item-412" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-412"><a href="https://idyl.io/arduino/how-to/syn115-syn480r-rf-wireless-transmitter-receiver/" class="nav__link"><span class="nav__title">How to interface with SYN115 / SYN480R wireless transmitter and receiver with Arduino</span></a></li>
		<li id="menu-item-551" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-551"><a href="https://idyl.io/arduino/how-to/interface-gps-module-arduino/" class="nav__link"><span class="nav__title">How to interface a GPS module with Arduino</span></a></li>
		<li id="menu-item-580" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-580"><a href="https://idyl.io/arduino/how-to/manipulate-arduino-ports/" class="nav__link"><span class="nav__title">How to manipulate whole ports with Arduino</span></a></li>
		<li id="menu-item-719" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-719"><a href="https://idyl.io/arduino/how-to/interface-si7021-sensor-arduino/" class="nav__link"><span class="nav__title">How to interface a Si7021 humidity and temperature sensor with Arduino</span></a></li>
		<li id="menu-item-776" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-776"><a href="https://idyl.io/arduino/how-to/interface-47c16-eeram-arduino/" class="nav__link"><span class="nav__title">How to interface a 47C16 EERAM with Arduino</span></a></li>
		<li id="menu-item-1247" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1247"><a href="https://idyl.io/arduino/how-to/program-stm32-blue-pill-stm32f103c8t6/" class="nav__link"><span class="nav__title">How to program a STM32 “Blue Pill” with Arduino</span></a></li>
</ul>
</li>
	<li id="menu-item-658" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-658" style=""><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" href="#" class="nav__link"><span class="nav__title">Projects</span><span class="caret__dropdown-toggler open-right"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu open-right" style="">
		<li id="menu-item-659" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-659"><a href="https://idyl.io/arduino/project/nixie-clock/" class="nav__link"><span class="nav__title">Arduino Nixie Clock</span></a></li>
		<li id="menu-item-327" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-327"><a data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" href="https://idyl.io/playstationpi/" class="nav__link"><span class="nav__title">PlaystationPI</span><span class="caret__dropdown-toggler open-right"><i class="icn-down-small"></i></span></a>
<ul class="dropdown-menu czr-dropdown-menu">
			<li id="menu-item-331" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-331"><a href="https://idyl.io/playstationpi/playstationpi-getting-and-disassembling-the-console/" class="nav__link"><span class="nav__title">PlaystationPI: getting and disassembling the console</span></a></li>
			<li id="menu-item-330" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-330"><a href="https://idyl.io/playstationpi/playstationpi-power-handling/" class="nav__link"><span class="nav__title">PlaystationPI: power handling</span></a></li>
			<li id="menu-item-329" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-329"><a href="https://idyl.io/playstationpi/playstationpi-cabling/" class="nav__link"><span class="nav__title">PlaystationPI: cabling</span></a></li>
			<li id="menu-item-328" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-328"><a href="https://idyl.io/playstationpi/playstationpi-putting-it-all-together-and-final-words/" class="nav__link"><span class="nav__title">PlaystationPI: putting it all together and final words</span></a></li>
</ul>
</li>
</ul>
</li>
	<li id="menu-item-325" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-234 current_page_item dropdown-item current-active menu-item-325"><a href="https://idyl.io/arduino/quadratic-wave-led/" aria-current="page" class="nav__link"><span class="nav__title">Sine Pulse LED PWM trick: the 8 bit way</span></a></li>
	<li id="menu-item-326" class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-326"><a href="https://idyl.io/arduino/sine-pulse-led-pwm-trick/" class="nav__link"><span class="nav__title">Sine Pulse LED PWM trick</span></a></li>
</ul>
</li>
</ul></div>        </nav>
    <div class="primary-nav__utils nav__utils col-auto">
    <ul class="nav utils flex-row flex-nowrap regular-nav">
      <li class="nav__search ">
  <a href="#" class="search-toggle_btn icn-search czr-overlay-toggle_btn" aria-expanded="false"><span class="sr-only">Search</span></a>
  </li>
    </ul>
</div>  </div>
</div>
    </div>
  </div>
</div>          <div class="mobile-navbar__wrapper d-lg-none">
    <div class="branding__container justify-content-between align-items-center container-fluid">
  <div class="branding flex-column">
    <div class="branding-row d-flex align-self-start flex-row align-items-center">
      <div class="navbar-brand col-auto ">
  <a class="navbar-brand-sitelogo" href="https://idyl.io/" aria-label="idyl.io | Electrical engineering &amp; Arduino resources for makers">
    <img src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/newlogo25032b.png" alt="Back Home" class="" style="max-width:250px;max-height:100px" data-no-retina="" width="250" height="100">  </a>
</div>
    </div>
    <span class="header-tagline col col-auto">
  Electrical engineering &amp; Arduino resources for makers</span>

  </div>
  <div class="mobile-utils__wrapper nav__utils regular-nav">
    <ul class="nav utils row flex-row flex-nowrap">
      <li class="hamburger-toggler__container ">
  <a href="#" class="ham-toggler-menu czr-collapsed" data-toggle="czr-collapse" data-target="#mobile-nav"><div class="ham__toggler-span-wrapper"><span class="line line-1"></span><span class="line line-2"></span><span class="line line-3"></span></div></a>
</li>
    </ul>
  </div>
</div>
<div class="mobile-nav__container ">
   <nav class="mobile-nav__nav flex-column czr-collapse" id="mobile-nav">
      <div class="mobile-nav__inner container-fluid">
      <div class="header-search__container ">
  <div class="search-form__container ">
  <form action="https://idyl.io/" method="get" class="czr-form search-form">
    <div class="form-group czr-focus">
            <label for="s-5d0c11ec94815" id="lsearch-5d0c11ec94815"><span>Search</span><i class="icn-search"></i><i class="icn-close"></i></label>
      <input id="s-5d0c11ec94815" class="form-control czr-search-field czr-focusable" name="s" type="text" aria-describedby="lsearch-5d0c11ec94815" title="Search …">
    </div>
  </form>
</div></div><div class="nav__menu-wrapper mobile-nav__menu-wrapper czr-open-on-click">
<ul id="mobile-nav-menu" class="mobile-nav__menu vertical-nav nav__menu flex-column nav"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-332"><a href="https://idyl.io/" class="nav__link"><span class="nav__title">Home</span></a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-333"><a href="https://idyl.io/category/review/" class="nav__link"><span class="nav__title">Reviews</span></a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children czr-dropdown menu-item-1135"><span class="display-flex nav__link-wrapper align-items-start"><a href="https://idyl.io/electronics/" class="nav__link"><span class="nav__title">Electronics</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
	<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1136"><a href="https://idyl.io/electronics/basics/voltage-current-resistance/" class="nav__link"><span class="nav__title">Voltage, current &amp; resistance</span></a></li>
	<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-1412"><span class="display-flex nav__link-wrapper align-items-start"><a href="#" class="nav__link"><span class="nav__title">Power</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1246"><a href="https://idyl.io/electronics/power/voltage-regulation/" class="nav__link"><span class="nav__title">Introduction to Voltage Regulation</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1413"><a href="https://idyl.io/electronics/power/linear-regulator/" class="nav__link"><span class="nav__title">The Linear Regulator</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="menu-item menu-item-type-custom menu-item-object-custom current-menu-ancestor current-menu-parent menu-item-has-children czr-dropdown current-active menu-item-334"><span class="display-flex nav__link-wrapper align-items-start"><a href="#" class="nav__link"><span class="nav__title">Arduino</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
	<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-411"><span class="display-flex nav__link-wrapper align-items-start"><a href="#" class="nav__link"><span class="nav__title">How To</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-455"><a href="https://idyl.io/arduino/how-to/control-a-nixie-tube-with-arduino/" class="nav__link"><span class="nav__title">How to control a Nixie Tube with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-412"><a href="https://idyl.io/arduino/how-to/syn115-syn480r-rf-wireless-transmitter-receiver/" class="nav__link"><span class="nav__title">How to interface with SYN115 / SYN480R wireless transmitter and receiver with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-551"><a href="https://idyl.io/arduino/how-to/interface-gps-module-arduino/" class="nav__link"><span class="nav__title">How to interface a GPS module with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-580"><a href="https://idyl.io/arduino/how-to/manipulate-arduino-ports/" class="nav__link"><span class="nav__title">How to manipulate whole ports with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-719"><a href="https://idyl.io/arduino/how-to/interface-si7021-sensor-arduino/" class="nav__link"><span class="nav__title">How to interface a Si7021 humidity and temperature sensor with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-776"><a href="https://idyl.io/arduino/how-to/interface-47c16-eeram-arduino/" class="nav__link"><span class="nav__title">How to interface a 47C16 EERAM with Arduino</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-1247"><a href="https://idyl.io/arduino/how-to/program-stm32-blue-pill-stm32f103c8t6/" class="nav__link"><span class="nav__title">How to program a STM32 “Blue Pill” with Arduino</span></a></li>
</ul>
</li>
	<li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-658"><span class="display-flex nav__link-wrapper align-items-start"><a href="#" class="nav__link"><span class="nav__title">Projects</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
		<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-659"><a href="https://idyl.io/arduino/project/nixie-clock/" class="nav__link"><span class="nav__title">Arduino Nixie Clock</span></a></li>
		<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home menu-item-has-children czr-dropdown-submenu dropdown-item menu-item-327"><span class="display-flex nav__link-wrapper align-items-start"><a href="https://idyl.io/playstationpi/" class="nav__link"><span class="nav__title">PlaystationPI</span></a><button data-toggle="czr-dropdown" aria-haspopup="true" aria-expanded="false" class="caret__dropdown-toggler czr-btn-link"><i class="icn-down-small"></i></button></span>
<ul class="dropdown-menu czr-dropdown-menu">
			<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-331"><a href="https://idyl.io/playstationpi/playstationpi-getting-and-disassembling-the-console/" class="nav__link"><span class="nav__title">PlaystationPI: getting and disassembling the console</span></a></li>
			<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-330"><a href="https://idyl.io/playstationpi/playstationpi-power-handling/" class="nav__link"><span class="nav__title">PlaystationPI: power handling</span></a></li>
			<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-329"><a href="https://idyl.io/playstationpi/playstationpi-cabling/" class="nav__link"><span class="nav__title">PlaystationPI: cabling</span></a></li>
			<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-328"><a href="https://idyl.io/playstationpi/playstationpi-putting-it-all-together-and-final-words/" class="nav__link"><span class="nav__title">PlaystationPI: putting it all together and final words</span></a></li>
</ul>
</li>
</ul>
</li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-234 current_page_item dropdown-item current-active menu-item-325"><a href="https://idyl.io/arduino/quadratic-wave-led/" aria-current="page" class="nav__link"><span class="nav__title">Sine Pulse LED PWM trick: the 8 bit way</span></a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page dropdown-item menu-item-326"><a href="https://idyl.io/arduino/sine-pulse-led-pwm-trick/" class="nav__link"><span class="nav__title">Sine Pulse LED PWM trick</span></a></li>
</ul>
</li>
</ul></div>      </div>
  </nav>
</div></div></header>
                                          

                                            
    <div id="main-wrapper" class="section">

                      

          <div class="czr-hot-crumble container page-breadcrumbs" role="navigation">
  <div class="row">
        <nav class="breadcrumbs col-12"><span class="trail-begin"><a href="https://idyl.io/" title="idyl.io" rel="home" class="trail-begin">Home</a></span> <span class="sep">»</span> <a href="https://idyl.io/arduino/" title="Arduino">Arduino</a> <span class="sep">»</span> <span class="trail-end">Sine Pulse LED PWM trick: the 8 bit way</span></nav>  </div>
</div>
          <div class="container" role="main">

            
            <div class="flex-row row column-content-wrapper">

                
                <div id="content" class="col-12 article-container">

                                                            <article id="page-234" class="post-234 page type-page status-publish has-post-thumbnail czr-hentry">
    <header class="entry-header ">
  <div class="entry-header-inner">
        <h1 class="entry-title">Sine Pulse LED PWM trick: the 8 bit way</h1>
      </div>
</header>  <div class="post-entry tc-content-inner">
    <section class="post-content entry-content ">
      <div class="czr-wp-the-content">
                                                  <blockquote>
<h2 style="padding-left: 30px;">In short</h2>
<p style="padding-left: 30px;">“QuadraticWaveLed” is a library that can pulsate LED using the PWM capabilities of attiny/atmega chips used by Arduinos. <a href="https://github.com/tonyp7/idylio/tree/master/QuadraticWaveLed">Download it from GitHub and install it in all your projects</a>!</p>
<p style="padding-left: 30px;"><span style="text-decoration: underline;"><strong>Effect obtained:</strong></span></p>
<p><iframe class="wp-embedded-content" sandbox="allow-scripts" security="restricted" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/clumsyfewkarakul.htm" data-secret="E6T4dgMfBV" scrolling="no" width="640" height="360" frameborder="0"></iframe></p>
<p style="padding-left: 30px;"><a href="https://idyl.io/arduino/sine-pulse-led-pwm-trick/">This tutorial is a follow up of the previous one</a>.
 This is a pure 8 bit solution to what is inherently a floating point 
problem, and the code ends up being over 3 times faster. Extreme hacking
 is involved!</p>
<p style="padding-left: 30px;">You can jump straight to the Arduino code
 if you don’t want to read about the theory behind the code. If you want
 to, carry on below!</p>
</blockquote>
<p>&nbsp;</p>
<h2>Getting the most performance out of a 8 bit chip</h2>
<p>In the previous version of this tutorial (<a href="https://idyl.io/arduino/sine-pulse-led-pwm-trick/">click here</a>),
 I described how to have a LED pulsate like a sine wave. It is a 
beautiful, mathematically accurate solution; and it would be implemented
 like this on a modern CPU with a floating point calculation unit.</p>
<p>The problem is: it’s really expensive on a 8 bit chip, and this for two reasons:</p>
<ol>
<li>The sine function. sin(x) is implemented in <a href="http://www.nongnu.org/avr-libc/">avr-libc</a>
 in assembly and a look up table. There is no doubt it’s a brilliant 
piece of code, but a CPU is better designed to do polynomial 
multiplications.</li>
<li>The elephant in the room: the usage of 32 bit floating points. These
 are incredibly slow. On a 8 bit chip doing math on 32 bit integers is 
already quite slow. So software emulated 32 bit floating point math? 
Ouch.</li>
</ol>
<p>In this tutorial, we will address both of these points.</p>
<p>&nbsp;</p>
<h2>Getting rid of the sine function call</h2>
<p>The idea here, is to replace the sin(f) call by a polynomial 
operation (that is to say: add and multiply). Some very smart people had
 already found out in the 18th century that you could replace any 
function by a sum of terms; and you might have heard of it, it’s the <a href="https://en.wikipedia.org/wiki/Taylor_series">Taylor series</a>.</p>
<p>Specifically, a sine function can be expressed this way:</p>
<p><img class="aligncenter size-full wp-image-236" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/sin_taylor.png" alt="" width="263" height="119"></p>
<p>While this works, <strong>it’s still too costly</strong>. In order to
 get a good precision on this Taylor series, we have to do quite a lot 
of math. x to the power of 7 can get rapidly expensive. We need 
something faster.</p>
<p>An alternative approach is to use <strong>quadratic functions</strong> (that is to say, terms that do not exceed the power of 2). <strong>x²</strong> is still fast to compute.</p>
<figure id="attachment_237" aria-describedby="caption-attachment-237" style="width: 649px" class="wp-caption aligncenter"><img class="size-full wp-image-237" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/xsquared.png" alt="f(x) = x^2" srcset="https://idyl.io/wp-content/uploads/2017/01/xsquared.png 649w, https://idyl.io/wp-content/uploads/2017/01/xsquared-300x173.png 300w" sizes="(max-width: 649px) 100vw, 649px" width="649" height="374"><figcaption id="caption-attachment-237" class="wp-caption-text">f(x) = x²</figcaption></figure>
<p>… Well that doesn’t look like a sine wave. Or does it? Imagine we 
invert the parabol after 1, then invert it again. Wouldn’t that look 
like a sine wave? Let’s build it:</p>
<figure id="attachment_238" aria-describedby="caption-attachment-238" style="width: 940px" class="wp-caption aligncenter"><img class="size-full wp-image-238" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/sinledhack_f.png" alt="&quot;Sine wave&quot; made of three quadratic functions" srcset="https://idyl.io/wp-content/uploads/2017/01/sinledhack_f.png 940w, https://idyl.io/wp-content/uploads/2017/01/sinledhack_f-300x103.png 300w, https://idyl.io/wp-content/uploads/2017/01/sinledhack_f-768x265.png 768w" sizes="(max-width: 940px) 100vw, 940px" width="940" height="324"><figcaption id="caption-attachment-238" class="wp-caption-text">“Sine wave” made of three quadratic functions</figcaption></figure>
<p>We will call the function above the “quadratic wave” from now on. 
This function is so close to a sine wave the difference between the real
 thing and this poor man’s version never exceeds 0.06.</p>
<figure id="attachment_240" aria-describedby="caption-attachment-240" style="width: 586px" class="wp-caption aligncenter"><img class="wp-image-240 size-full" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/sine_vs_quadratic_wave.png" alt="The two curves are so close you can barely see the difference!" srcset="https://idyl.io/wp-content/uploads/2017/01/sine_vs_quadratic_wave.png 586w, https://idyl.io/wp-content/uploads/2017/01/sine_vs_quadratic_wave-300x173.png 300w" sizes="(max-width: 586px) 100vw, 586px" width="586" height="338"><figcaption id="caption-attachment-240" class="wp-caption-text">The two curves are so close you can barely see the difference!</figcaption></figure>
<p>Side note: a function made of several function is called a “<a href="https://en.wikipedia.org/wiki/Piecewise">piecewise-defined function</a>“. Our quadratic wave can be written as such:</p>
<p><img class="aligncenter size-full wp-image-244" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/quadratic_wave_function.png" alt="" srcset="https://idyl.io/wp-content/uploads/2017/01/quadratic_wave_function.png 374w, https://idyl.io/wp-content/uploads/2017/01/quadratic_wave_function-300x87.png 300w" sizes="(max-width: 374px) 100vw, 374px" width="374" height="109"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2>Getting rid of floating points: the fixed point approach</h2>
<p>Fixed point is a very simple approach to floating point problems. We 
just arbitrarily decide that part of a number represent the decimal 
values.</p>
<p>For example, on a 16 bit number, you could decide that the first 8 
bit represent the integer part, and the 8 other represent the decimal 
part. For instance, a number like 0x<span style="color: #ff0000;">4a</span><span style="color: #339966;">b2</span> can be read as:</p>
<ul>
<li>0x<span style="color: #ff0000;">4a</span>: 74</li>
<li>0x<span style="color: #339966;">b2</span>: 178, 1/256 * 178 = <span id="cwos" class="cwcot">0.6953125</span></li>
</ul>
<p>Therefore: 0x4ab2 = 74.<span id="cwos" class="cwcot">6953125</span></p>
<p>Another way to see these numbers is that they behave like integers, 
but the minimal increment is the least significant bit on the decimal 
side of the number. With 8 bit decimal precision, the minimal increment 
to the number is 1/256=<span id="cwos" class="cwcot">0.00390625</span>. Writing i++ would increment this number by <span id="cwos" class="cwcot">0.00390625</span>.<br>
With such number, on a 16 bit scale, you can therefore write numbers from 0 to (1/256)*65535 = <span id="cwos" class="cwcot">255.99609375. In hexadecimal, this number would be 0xffff.</span></p>
<p>This tutorial is not dedicated to fixed point math, so feel free to 
dig deeper if you wish to. The main take away here is that using fixed 
point math, you can do addition and multiplications using traditional 
integer arithmetic. For all intent and purposes, your fixed point 
numbers are seen as 16 bit or 32 bit integers by the CPU.</p><div style="text-align: center; width: 100%; height: auto; clear: none;" class="google-auto-placed ap_container"><ins style="display: block; margin: auto; background-color: transparent;" data-ad-format="auto" class="adsbygoogle adsbygoogle-noablate" data-ad-client="ca-pub-8282748246084126" data-adsbygoogle-status="done"><ins id="aswift_1_expand" style="display:inline-table;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:1110px;background-color:transparent;"><ins id="aswift_1_anchor" style="display:block;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:1110px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_1" name="aswift_1" style="left:0;position:absolute;top:0;border:0px;width:1110px;height:200px;" width="1110" height="200" frameborder="0"></iframe></ins></ins></ins></div>
<p>In the code below, the chosen fixed point format is:</p>
<ul>
<li>1 sign bit</li>
<li>6 bit integer (range from 0 to 64)</li>
<li>9 bit decimal (precision of 1/512 = <span id="cwos" class="cwcot">0.001953125</span>)</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1>The Arduino code</h1>
<p>The Arduino code below is a direct translation of the quadratic wave 
function explained above, applied with fixed point math. It is neatly 
packaged in a class called “<strong>QuadraticWaveLed</strong>” so that you can easily transport it to your projects.</p>
<p>Compared to the previous project, this code ran slightly <strong>over 3.5 times faster</strong> than the floating point version.</p>
<h2>How to use this library?</h2>
<ol>
<li>Download&nbsp;<a id="ff6b5624cc356d9cece58d31765b148c-ecb3d2226ad68f49ce90fd9cffe1459c0ad4daa4" class="js-navigation-open" title="QuadraticWaveLed.cpp" href="https://github.com/tonyp7/idylio/blob/master/QuadraticWaveLed/QuadraticWaveLed.cpp">QuadraticWaveLed.cpp</a>&nbsp;and <a href="https://github.com/tonyp7/idylio/blob/master/QuadraticWaveLed/QuadraticWaveLed.h">QuadraticWaveLed.h</a>&nbsp;from GitHub</li>
<li>Paste these file your Arduino project main folder. Alternatively, 
you can download the sample Arduino sketch using the library at <a href="https://github.com/tonyp7/idylio/blob/master/QuadraticWaveLed/QuadraticWaveLed.ino">GitHub</a></li>
<li>Add the library through #include “QuadraticWaveLed.h”</li>
<li>Create an object QuadraticWaveLed, and call the “setup” function. 
First argument is the pin number to be used, 2nd in the lenght of the 
wave, in milliseconds.</li>
<li>In your program loop, feed the “update” method with current time elapsed.</li>
</ol>
<h3>Sample program, with a 2s wave and using pin 11 of the Arduino Uno</h3>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5d0c11ec8f108565490380" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;"><div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span><div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C++</span></div></div><div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div class="crayon-plain-wrap czr-focus"><textarea class="crayon-plain print-no czr-focusable" data-settings="dblclick" readonly="readonly" style="-moz-tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;" wrap="soft">#include "QuadraticWaveLed.h"

QuadraticWaveLed quadraticWaveLed;
const int LED_PIN = 11;     //11 is a PWM pin on the Arduino Uno. Change to whichever pin you wish to use.
const unsigned long WAVE_LEN = 2000UL;  //in milliseconds. This wave will last 2 seconds.

unsigned long milli = 0UL;

void setup() {
  quadraticWaveLed.setup(LED_PIN, WAVE_LEN);
}

void loop() {
  milli = millis();
  quadraticWaveLed.update(milli);
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="margin-left: -25px;">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-2">2</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-4">4</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-6">6</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-8">8</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-10">10</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-12">12</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-14">14</div><div class="crayon-num" data-line="crayon-5d0c11ec8f108565490380-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f108565490380-16">16</div></div></td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-1"><span class="crayon-p">#include "QuadraticWaveLed.h"</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-2">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-3"><span class="crayon-e">QuadraticWaveLed </span><span class="crayon-v">quadraticWaveLed</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-4"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-t">int</span><span class="crayon-h"> </span><span class="crayon-v">LED_PIN</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">11</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="crayon-c">//11 is a PWM pin on the Arduino Uno. Change to whichever pin you wish to use.</span></div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-5"><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-t">unsigned</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">WAVE_LEN</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">2000UL</span><span class="crayon-sy">;</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-c">//in milliseconds. This wave will last 2 seconds.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-6">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-7"><span class="crayon-t">unsigned</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">milli</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0UL</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-8">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-9"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-10"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">quadraticWaveLed</span><span class="crayon-sy">.</span><span class="crayon-e">setup</span><span class="crayon-sy">(</span><span class="crayon-v">LED_PIN</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">WAVE_LEN</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-11"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-12">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-13"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-e">loop</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-14"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">milli</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">millis</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5d0c11ec8f108565490380-15"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">quadraticWaveLed</span><span class="crayon-sy">.</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-v">milli</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f108565490380-16"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div></div><!-- [Format Time: 0.0004 seconds] -->
<p>&nbsp;</p>
<h3>Implementation</h3>
<p>“update” contains the meat of the code. This code:</p>
<ul>
<li>Convert the argument given to the [0 .. wave duration] using the modulus operation</li>
<li>Normalize this value to the [0 .. 4] range –which is the operating range of our quadratic function.</li>
<li>Apply our quadratic wave function</li>
<li>Convert the value obtained to the [0 .. 255] range for PWM output</li>
<li>analogWrite this value to the led pin.</li>
</ul>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta --><div id="crayon-5d0c11ec8f10f619665643" class="crayon-syntax crayon-theme-classic crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover" style="margin-top: 12px; margin-bottom: 12px; font-size: 12px !important; line-height: 15px !important; height: auto;"><div class="crayon-toolbar" data-settings=" show" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><span class="crayon-title"></span><div class="crayon-tools" style="font-size: 12px !important;height: 18px !important; line-height: 18px !important;"><div class="crayon-button crayon-nums-button" title="Toggle Line Numbers"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-plain-button" title="Toggle Plain Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-wrap-button" title="Toggle Line Wrap"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-expand-button" title="Expand Code"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-copy-button" title="Copy"><div class="crayon-button-icon"></div></div><div class="crayon-button crayon-popup-button" title="Open Code In New Window"><div class="crayon-button-icon"></div></div><span class="crayon-language">C++</span></div></div><div class="crayon-info" style="min-height: 16.8px !important; line-height: 16.8px !important;"></div><div class="crayon-plain-wrap czr-focus"><textarea class="crayon-plain print-no czr-focusable" data-settings="dblclick" readonly="readonly" style="-moz-tab-size: 4; font-size: 12px !important; line-height: 15px !important; z-index: 0; opacity: 0; overflow: hidden;" wrap="soft">void QuadraticWaveLed::update(const unsigned long milli){
	unsigned long mod = milli % this-&gt;waveLen;

	//transform to 0--1 range
	this-&gt;value = muluf16p16(inttouf16p16(mod), this-&gt;inverseWaveLen);

	//convert to 0--4 range: multiply by 4 by shifting left twice
	this-&gt;value = this-&gt;value &lt;&lt; 2; 

	//apply wave
	this-&gt;value = quadraticWavef7p9(this-&gt;value);

	//convert to 0-255 range
	uint8_t pwm_value = ((int32_t)this-&gt;value * floattof23p9(127.5f)) &gt;&gt; 18;

	//write to LED
	analogWrite(this-&gt;pinNo, pwm_value);
}</textarea></div><div class="crayon-main" style="position: relative; z-index: 1; overflow: hidden;">
				<table class="crayon-table" style="margin-left: -25px;">
					<tbody><tr class="crayon-row">
				<td class="crayon-nums " data-settings="hide"><div class="crayon-nums-content" style="font-size: 12px !important; line-height: 15px !important;"><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-2">2</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-4">4</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-6">6</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-8">8</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-10">10</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-12">12</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-14">14</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-16">16</div><div class="crayon-num" data-line="crayon-5d0c11ec8f10f619665643-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-5d0c11ec8f10f619665643-18">18</div></div></td>
						<td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-1"><span class="crayon-t">void</span><span class="crayon-h"> </span><span class="crayon-v">QuadraticWaveLed</span><span class="crayon-o">::</span><span class="crayon-e">update</span><span class="crayon-sy">(</span><span class="crayon-m">const</span><span class="crayon-h"> </span><span class="crayon-t">unsigned</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">milli</span><span class="crayon-sy">)</span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-2"><span class="crayon-h">	</span><span class="crayon-t">unsigned</span><span class="crayon-h"> </span><span class="crayon-t">long</span><span class="crayon-h"> </span><span class="crayon-v">mod</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">milli</span><span class="crayon-h"> </span><span class="crayon-o">%</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">waveLen</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-3">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-4"><span class="crayon-h">	</span><span class="crayon-c">//transform to 0--1 range</span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-5"><span class="crayon-h">	</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">muluf16p16</span><span class="crayon-sy">(</span><span class="crayon-e">inttouf16p16</span><span class="crayon-sy">(</span><span class="crayon-v">mod</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">inverseWaveLen</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-6">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-7"><span class="crayon-h">	</span><span class="crayon-c">//convert to 0--4 range: multiply by 4 by shifting left twice</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-8"><span class="crayon-h">	</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-h"> </span><span class="crayon-o">&lt;&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">;</span><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-10"><span class="crayon-h">	</span><span class="crayon-c">//apply wave</span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-11"><span class="crayon-h">	</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">quadraticWavef7p9</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-12">&nbsp;</div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-13"><span class="crayon-h">	</span><span class="crayon-c">//convert to 0-255 range</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-14"><span class="crayon-h">	</span><span class="crayon-e">uint8_t </span><span class="crayon-v">pwm_value</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-sy">(</span><span class="crayon-v">int32_t</span><span class="crayon-sy">)</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-t">value</span><span class="crayon-h"> </span><span class="crayon-o">*</span><span class="crayon-h"> </span><span class="crayon-e">floattof23p9</span><span class="crayon-sy">(</span><span class="crayon-cn">127.5f</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-o">&gt;&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">18</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-15">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-16"><span class="crayon-h">	</span><span class="crayon-c">//write to LED</span></div><div class="crayon-line" id="crayon-5d0c11ec8f10f619665643-17"><span class="crayon-h">	</span><span class="crayon-e">analogWrite</span><span class="crayon-sy">(</span><span class="crayon-r">this</span><span class="crayon-o">-&gt;</span><span class="crayon-v">pinNo</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">pwm_value</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5d0c11ec8f10f619665643-18"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</tbody></table>
			</div></div><!-- [Format Time: 0.0005 seconds] -->
<p></p>
<h1></h1>
<h1>Final words</h1>
<p>There are still some additional speed hacks that could be performed, I
 can think about using an accumulator and sending to the program the 
time elapsed instead of the full millis() call, or there could be even 
bigger hacks.</p>
<p>For instance the multiplication at the end of the code by 127.5 could
 be changed by a 7 bit left shift: that would multiply it by 128 would 
be close enough. All of these are possible but they would make the code a
 lot less usable and readable.</p><div style="text-align: center; width: 100%; height: auto; clear: none;" class="google-auto-placed ap_container"><ins style="display: block; margin: auto; background-color: transparent;" data-ad-format="auto" class="adsbygoogle adsbygoogle-noablate" data-ad-client="ca-pub-8282748246084126" data-adsbygoogle-status="done"><ins id="aswift_2_expand" style="display:inline-table;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:1110px;background-color:transparent;"><ins id="aswift_2_anchor" style="display:block;border:none;height:200px;margin:0;padding:0;position:relative;visibility:visible;width:1110px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_2" name="aswift_2" style="left:0;position:absolute;top:0;border:0px;width:1110px;height:200px;" width="1110" height="200" frameborder="0"></iframe></ins></ins></ins></div>
<p>Right now, I feel like this is a good balance between speed and ease of use.</p>
<p>And to conclude, this code is licensed under CC-BY 4.0 so feel free to use it in any of your projects, personal or not!</p>
                                                </div>
      <footer class="post-footer clearfix">
                      </footer>
    </section><!-- .entry-content -->
  </div><!-- .post-entry -->
  </article>                                                          </div>

                
<div id="czr-comments" class="comments-area col-12 order-md-last">
    <div id="comments" class="comments_container comments czr-comments-block">
  <section class="post-comments">
      </section>
</div>  </div>
            </div><!-- .column-content-wrapper -->

            

          </div><!-- .container -->

          <div id="czr-push-footer"></div>
    </div><!-- #main-wrapper -->

    
    
                                          <footer id="footer" class="footer__wrapper">
  <div id="footer-widget-area" class="widget__wrapper" role="complementary">
  <div class="container widget__container">
    <div class="row">
                      <div id="footer_one" class="col-md-4 col-12">
            <aside id="rss-6" class="widget widget_rss"><h5 class="widget-title"><a class="rsswidget" href="https://www.raspberrypi.org/feed/"><img class="rss-widget-icon" style="border:0" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/rss.png" alt="RSS" width="14" height="14"></a> <a class="rsswidget" href="https://www.raspberrypi.org/">Raspberry Pi</a></h5><ul><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/recreate-the-sprite-following-options-from-gradius-using-python-wireframe-issue-16/">Recreate the sprite-following Options from Gradius using Python | Wireframe issue 16</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/european-astro-pi-challenge-mission-space-lab-winners-2018-2019/">European Astro Pi Challenge: Mission Space Lab winners 2018–2019!</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/chat-ada-lovelace-raspberry-pi/">Chat to Ada Lovelace via a Raspberry Pi</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/an-in-flight-entertainment-system-that-isnt-terrible/">An in-flight entertainment system that isn’t terrible</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/remembering-andy-baker/">Remembering Andy Baker</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/playback-your-favourite-records-with-plynth/">Playback your favourite records with Plynth</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/digital-ghost-hunt-raspberry-pi-hello-world-9/">Ghost-hunting in schools with Raspberry Pi | Hello World #9</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/driverless-cars-run-by-raspberry-pi/">Driverless cars run by Raspberry Pi</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/retrofit-raspberry-pi-handheld-casio-portable-tv/">Retrofit a handheld Casio portable TV with a Raspberry Pi</a></li><li><a class="rsswidget" href="https://www.raspberrypi.org/blog/an-opportunity-to-reach-thousands-with-the-raspberry-pi/">An opportunity to reach thousands with the Raspberry Pi</a></li></ul></aside>          </div>
                  <div id="footer_two" class="col-md-4 col-12">
            <aside id="rss-7" class="widget widget_rss"><h5 class="widget-title"><a class="rsswidget" href="https://blog.arduino.cc/?s=rss"><img class="rss-widget-icon" style="border:0" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/rss.png" alt="RSS" width="14" height="14"></a> <a class="rsswidget" href="https://blog.arduino.cc/">Arduino Blog</a></h5><ul><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/20/this-robotic-fish-is-powered-by-its-own-artificial-circulatory-system/">This robotic fish is powered by its own artificial circulatory system</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/19/intuitive-arduino-clock-has-seven-alarms-and-three-led-displays/">Intuitive Arduino clock has seven alarms and three LED displays</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/19/portable-arduino-bot-lets-you-test-ideas-on-the-go/">Portable Arduino Bot lets you test ideas on the go</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/18/synchronized-bike-lighting-inspired-by-nature/">Synchronized bike lighting inspired by nature</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/18/a-surfing-desk-toy-that-you-can-actually-ride/">A surfing “desk toy” that you can actually ride</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/17/microscopic-gigapixel-photography-with-this-x-y-stage-setup/">Microscopic gigapixel photography with this X/Y stage setup</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/14/this-self-balancing-mech-is-piloted-by-an-insect/">This self-balancing mech is piloted by an insect</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/13/building-gas-thruster-controlled-drone/">Building gas thruster-controlled drone</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/11/wake-up-to-this-unique-vfd-alarm-clock/">Wake up to this unique VFD alarm clock!</a></li><li><a class="rsswidget" href="https://blog.arduino.cc/2019/06/11/3d-printer-converted-into-a-cheap-bioprinting-rig/">3D printer converted into a cheap bioprinting rig</a></li></ul></aside>          </div>
                  <div id="footer_three" class="col-md-4 col-12">
            <aside id="rss-8" class="widget widget_rss"><h5 class="widget-title"><a class="rsswidget" href="https://www.sparkfun.com/feeds/news"><img class="rss-widget-icon" style="border:0" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/rss.png" alt="RSS" width="14" height="14"></a> <a class="rsswidget" href="https://www.sparkfun.com/news">SparkFun: Commerce Blog</a></h5><ul><li><a class="rsswidget" href="https://www.sparkfun.com/news/2946">Enginursday: Get Wired Up!</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2947">Let’s "Electrify" a Korean Board Game</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2941">NVIDIA Goes Live with Complimentary Course: "Getting Started on AI with the Jetson Nano"</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2945">Friday Product Post: gator:boards for micro:bit</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2938">Enginursday: Aerofest 2019</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2943">How to get a Bootloader on your Board</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2944">APRS: Robust Wireless in an Age of IoT</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2942">The End of an Era</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2940">Friday Product Post: Power to the People</a></li><li><a class="rsswidget" href="https://www.sparkfun.com/news/2939">Enginursday: DIY Capacitive Touch Night Light</a></li></ul></aside>          </div>
                  </div>
  </div>
</div>
<div id="colophon" class="colophon ">
  <div class="container-fluid">
    <div class="colophon__row row flex-row justify-content-between">
      <div class="col-12 col-sm-auto">
        <div id="footer__credits" class="footer__credits">
  <p class="czr-copyright">
    <span class="czr-copyright-text">©&nbsp;2019&nbsp;</span><a class="czr-copyright-link" href="https://idyl.io/" title="idyl.io">idyl.io</a><span class="czr-rights-text">&nbsp;–&nbsp;All rights reserved</span>
  </p>
  <p class="czr-credits">
    <span class="czr-designer">
      <span class="czr-wp-powered"><span class="czr-wp-powered-text">Powered by&nbsp;</span><a class="czr-wp-powered-link fab fa-wordpress" title="Powered by WordPress" href="https://wordpress.org/" target="_blank"></a></span><span class="czr-designer-text">&nbsp;–&nbsp;Designed with the <a class="czr-designer-link" href="https://presscustomizr.com/customizr" title="Customizr theme">Customizr theme</a></span>
    </span>
  </p>
</div>
      </div>
          </div>
  </div>
</div>
</footer>
    </div><!-- end #tc-page-wrap -->

    <section class="czr-overlay search_o">
  <a href="#" class="search-close_btn search-toggle_btn czr-overlay-toggle_btn"><i class="icn-close"></i></a>
  <div class="overlay-content">
    <div class="search__wrapper">
    <div class="search-form__container ">
  <form action="https://idyl.io/" method="get" class="czr-form search-form">
    <div class="form-group czr-focus">
            <label for="s-5d0c11ec9b828" id="lsearch-5d0c11ec9b828"><span>Search</span><i class="icn-search"></i><i class="icn-close"></i></label>
      <input id="s-5d0c11ec9b828" class="form-control czr-search-field czr-focusable" name="s" type="text" aria-describedby="lsearch-5d0c11ec9b828" title="Search …">
    </div>
  </form>
</div>    </div>
  </div>
</section><div class="btn czr-btt czr-btta right"><i class="icn-up-small"></i></div>
<img alt="css.php" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/css.gif" width="1" height="1"><script type="text/javascript">
/* <![CDATA[ */
var sekFrontLocalized = {"isDevMode":"","frontNonce":{"id":"SEKFrontNonce","handle":"621d13fc7c"},"localSeks":"","globalSeks":"","skope_id":"skp__post_page_234","recaptcha_public_key":""};
/* ]]> */
</script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/ccat-nimble-front.js"></script>
<script type="text/javascript">
/* <![CDATA[ */
var ctcc_vars = {"expiry":"30","method":"1","version":"1"};
/* ]]> */
</script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/uk-cookie-consent-js.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/comment-reply.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/core.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/fitvids.js"></script>
<script type="text/javascript" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/wp-embed.js"></script>
			
				<script type="text/javascript">
					jQuery(document).ready(function($){
												if(!catapultReadCookie("catAccCookies")){ // If the cookie has not been set then show the bar
							$("html").addClass("has-cookie-bar");
							$("html").addClass("cookie-bar-top-bar");
							$("html").addClass("cookie-bar-bar");
															// Wait for the animation on the html to end before recalculating the required top margin
								$("html").on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function(e) {
									// code to execute after transition ends
									var barHeight = $('#catapult-cookie-bar').outerHeight();
									$("html").css("margin-top",barHeight);
									$("body.admin-bar").css("margin-top",barHeight-32); // Push the body down if the admin bar is active
								});
													}
																			ctccFirstPage();
											});
				</script>
			
			<div id="catapult-cookie-bar" class=""><div class="ctcc-inner "><span class="ctcc-left-side">We
 use cookies on this site to personalize content and ads and analize web
 traffic. By clicking Okay, you are consenting for us to set cookies. <a class="ctcc-more-info-link" tabindex="0" target="_blank" href="https://idyl.io/cookie-policy/">Learn more about cookies</a></span><span class="ctcc-right-side"><button id="catapultCookie" tabindex="0" onclick="catapultAcceptCookies();">Okay, thanks</button></span></div><!-- custom wrapper class --></div><!-- #catapult-cookie-bar -->  
  
<ins class="adsbygoogle adsbygoogle-noablate" style="display: none !important;" data-adsbygoogle-status="done"><ins id="aswift_0_expand" style="display:inline-table;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><ins id="aswift_0_anchor" style="display:block;border:none;height:0px;margin:0;padding:0;position:relative;visibility:visible;width:0px;background-color:transparent;"><iframe marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allowfullscreen="true" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0px;width:0px;height:0px;" frameborder="0"></iframe></ins></ins></ins><iframe id="google_osd_static_frame_541350942135" name="google_osd_static_frame" style="display: none; width: 0px; height: 0px;"></iframe></body><iframe id="google_esf" name="google_esf" src="Sine%20Pulse%20LED%20PWM%20trick%20%20the%208%20bit%20way%20%E2%80%93%20idyl.io%20Archivos/zrt_lookup.htm" style="display: none;" data-ad-client="ca-pub-8282748246084126"></iframe></html>